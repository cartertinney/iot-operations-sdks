{
    "name": "Empty cluster",
    "build": {
        "dockerfile": "Dockerfile"
    },
    "hostRequirements": {
        "cpus": 4,
        "memory": "16gb",
        "storage": "32gb"
    },
    "features": {
        "ghcr.io/devcontainers/features/dotnet:2": {},
        "ghcr.io/devcontainers/features/rust:1": {},
        "ghcr.io/devcontainers/features/go:1": {},
        "ghcr.io/devcontainers/features/azure-cli:1": {
            "extensions": "connectedk8s,k8s-extension,azure-iot-ops"
        }
    },
    "customizations": {
        "vscode": {
            "extensions": [
                "vsciot-vscode.vscode-dtdl",
                "ms-azuretools.vscode-bicep",
                "ms-azuretools.vscode-docker",
                "ms-kubernetes-tools.vscode-kubernetes-tools"
            ]
        },
        "settings": {
            "scm.repositories.visible": true,
            "scm.alwaysShowRepositories": true,
            "scm.defaultViewMode": "tree",
            "files.trimTrailingWhitespace": true,
            "files.trimFinalNewlines": true,
            "telemetry.telemetryLevel": "off",
            "redhat.telemetry.enabled": false
        }
    },
    "containerEnv": {
        "DOTNET_CLI_TELEMETRY_OPTOUT": "true"
    },
    "forwardPorts": [
        1883,
        8883,
        8884
    ],
    "secrets": {
        "SUBSCRIPTION_ID": {
            "description": "Your Azure subscription ID"
        },
        "RESOURCE_GROUP": {
            "description": "Your Azure resource group"
        },
        "LOCATION": {
            "description": "Region to use, must be one of eastus, eastus2, westus, westus2, westeurope, or northeurope.",
            "documentationUrl": "https://learn.microsoft.com/azure/iot-operations/deploy-iot-ops/howto-prepare-cluster"
        }
    },
    "waitFor": "postCreateCommand",
    "onCreateCommand": ".devcontainer/onCreateCommand.sh",
    "postCreateCommand": "git pull",
    "postStartCommand": ".devcontainer/postStartCommand.sh"
}